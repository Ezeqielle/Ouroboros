# Migration `20200801155502-update-migration-mysql`

This migration has been generated by Mr Wolf at 8/1/2020, 3:55:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `commubot`.`User` (
`id` int NOT NULL  AUTO_INCREMENT,
`discord_id` varchar(191) NOT NULL ,
`blizzard_token` varchar(191) NOT NULL ,
`status` int NOT NULL DEFAULT 1,
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
`updatedAt` datetime(3) NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `commubot`.`Balance` (
`id` int NOT NULL  AUTO_INCREMENT,
`realm` varchar(191) NOT NULL ,
`userId` int NOT NULL ,
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
`updatedAt` datetime(3) NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `commubot`.`Character` (
`id` int NOT NULL  AUTO_INCREMENT,
`name` varchar(191) NOT NULL ,
`server` varchar(191) NOT NULL ,
`wow_id` varchar(191) NOT NULL ,
`class` varchar(191) NOT NULL ,
`userId` int NOT NULL ,
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
`updatedAt` datetime(3) NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `commubot`.`Role` (
`id` int NOT NULL  AUTO_INCREMENT,
`heal` int NOT NULL DEFAULT 0,
`tank` int NOT NULL DEFAULT 0,
`dps` int NOT NULL DEFAULT 0,
`characterId` int NOT NULL ,
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
`updatedAt` datetime(3) NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `commubot`.`Boost` (
`id` int NOT NULL  AUTO_INCREMENT,
`type` int NOT NULL ,
`pot` int NOT NULL ,
`adv` varchar(191) NOT NULL ,
`userId` int NOT NULL ,
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE UNIQUE INDEX `User.discord_id` ON `commubot`.`User`(`discord_id`)

CREATE UNIQUE INDEX `Role_characterId` ON `commubot`.`Role`(`characterId`)

ALTER TABLE `commubot`.`Balance` ADD FOREIGN KEY (`userId`) REFERENCES `commubot`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `commubot`.`Character` ADD FOREIGN KEY (`userId`) REFERENCES `commubot`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `commubot`.`Role` ADD FOREIGN KEY (`characterId`) REFERENCES `commubot`.`Character`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `commubot`.`Boost` ADD FOREIGN KEY (`userId`) REFERENCES `commubot`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200730223149-migration-init..20200801155502-update-migration-mysql
--- datamodel.dml
+++ datamodel.dml
@@ -1,23 +1,26 @@
 // This is your Prisma schema file,
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
-  provider = "postgresql"
-  url = "***"
+  provider = "mysql"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model User {
-  id            Int         @default(autoincrement()) @id
-  discord_id    String      @unique
-  characters    Character[]
-  balances      Balance[]
-  createdAt     DateTime    @default(now())
-  updatedAt     DateTime    @updatedAt
+  id                Int         @default(autoincrement()) @id
+  discord_id        String      @unique
+  blizzard_token    String
+  status            Int        @default(1)
+  characters        Character[]
+  balances          Balance[]
+  boost             Boost[]
+  createdAt         DateTime    @default(now())
+  updatedAt         DateTime    @updatedAt
 }
 model Balance {
     id             Int          @default(autoincrement()) @id
@@ -49,5 +52,15 @@
     character   Character   @relation(fields:[characterId], references:[id])
     characterId Int
     createdAt   DateTime    @default(now())
     updatedAt   DateTime    @updatedAt
+}
+
+model Boost {
+    id          Int         @default(autoincrement()) @id
+    type        Int
+    pot         Int
+    adv         String
+    user        User        @relation(fields:[userId], references:[id])
+    userId      Int
+    createdAt   DateTime    @default(now())
 }
```


